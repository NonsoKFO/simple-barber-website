"use strict";(self.webpackChunkonline_convert=self.webpackChunkonline_convert||[]).push([[2608],{18839:function(e,t,r){r.d(t,{x7:function(){return I},IE:function(){return P}});r(32564),r(74916),r(15306),r(4723);var n=r(23091),i=r(82017),o=r(72997),a=r(87506),l=(r(69826),r(41539),r(68917)),p=r(56413),u=r(90375);function s(e){this._isValid=!0,this._rawData={},(0,p.dA)(e)?this._rawData=e:this._isValid=!1}function d(e){if(!(0,o.Rb)(e))return e;try{var t=JSON.parse(e);if((0,o.jV)(t))return a.P.log("qgApiHelper server response was fixed",JSON.stringify(e)),t}catch(e){}return a.P.log("qgApiHelper server response was not fixed",JSON.stringify(e)),e}s.prototype.isValid=function(){return this._isValid},s.prototype.getId=function(){return(0,n.GY)(this._isValid),this._rawData.id},s.prototype.getSize=function(){return(0,n.GY)(this._isValid),this._rawData.size},s.prototype.getStatus=function(){return(0,n.GY)(this._isValid),(0,i.cV)(this._rawData.status),this._rawData.status},s.prototype.isFinished=function(){return(0,n.GY)(this._isValid),this._rawData.status===u.dp};var c=r(74336),f=r(38232),g=r(19755);function h(e){var t=null;try{t=e.responseText,e.responseJSON&&(t=e.responseJSON)}catch(e){}return t}function v(e,t){this.api=e,this.baseUrlApi=f.f.getApiUrl(),(0,o.Rt)(t.baseUrlApi)&&(this.baseUrlApi=t.baseUrlApi)}v.prototype.createJob=function(e){var t=this.api;(0,o.jV)(e)||(e={});var r=g.extend({},t.baseAjaxOptions);r.url=this.baseUrlApi+"/api/jobs?async=true",r.data=e;var n=g.Deferred(),i=this;return t.ajaxWrapper.postJson(r).done((function(e,r,o){e=d(e),i.getJobInfoUntilStatus(e.sat.id_job,"incomplete",10,!0).done((function(r){var i=new l.S(r);if(!i.isValid())return a.P.log("qgApiHelper createJob fail broken response",{info:"response: "+JSON.stringify(e)}),void n.reject(c.FK);var o=r,p=i.getId();t.jobCache.setData(p,o),a.P.addLogData("job_id",p),a.P.log("qgApiHelper createJob done"),n.resolve(o)})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper createJob fail - payment required"),void n.reject(c.lV,t);n.reject(c.QG)}))})).fail((function(e,t,r){if(402===e.status)return a.P.log("qgApiHelper createJob fail - payment required"),void n.reject(c.lV,h(e));n.reject(c.QG)})),n},v.prototype.getJobInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.A2)(e);var i=this.api,o=g.Deferred(),l=g.extend({},i.baseAjaxOptions);l.url=this.baseUrlApi+"/api/jobs/"+e,!0===t&&!1===r&&(l.url+="?async=true"),!0===r&&(l.url+="?sync=true"),i.numberOfCurrentJobInfoRequests.hasOwnProperty(e)||(i.numberOfCurrentJobInfoRequests[e]=0),i.numberOfCurrentJobInfoRequests[e]++;return i.ajaxWrapper.get(l).done((function(t,r,n){i.numberOfCurrentJobInfoRequests[e]--;var a=t=d(t);i.jobCache.setData(e,a),o.resolve(a)})).fail((function(t,r,n){return i.numberOfCurrentJobInfoRequests[e]--,402===t.status?(a.P.log("qgApiHelper getJobInfo fail payment required",t.status),void o.reject(c.lV,h(t))):404===t.status?(a.P.log("qgApiHelper getJobInfo fail job not found",t.status),void o.reject(c.ZH)):(a.P.log("qgApiHelper getJobInfo fail connection problem",t.status),void o.reject(c.QG))})),o},v.prototype.getJobInfoUntilStatus=function(e,t,r,i){(0,n.A2)(e),(0,o.vV)(i)&&(i=!0),(0,o.uC)(r)||(r=5),(0,n.VW)(r),(0,n.GY)(r>0);var l=g.Deferred(),p=0,u=this;return function n(){if(p>r)return a.P.log("qgApiHelper getJobInfoUntilStatus fail - no more retries"),void l.reject(c.db);u.getJobInfo(e,i).done((function(e){if(e.status.code!==t){"init"===e.status.code&&200,p++,setTimeout(n,100)}else l.resolve(e)})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper getJobInfoWithRetries getJobInfo fail - payment required",e),void l.reject(c.lV,t);p++,setTimeout(n,2e3)}))}(),l},v.prototype.getJobInfoWithRetries=function(e,t){(0,n.A2)(e),(0,o.uC)(t)||(t=5),(0,n.VW)(t),(0,n.GY)(t>0);var r=g.Deferred(),i=0,l=this;return function n(){if(i>t)return a.P.log("qgApiHelper getJobInfoWithRetries fail - no more retries"),void r.reject(c.db);l.getJobInfo(e).done((function(e){r.resolve(e)})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper getJobInfoWithRetries getJobInfo fail - payment required"),void r.reject(c.lV,t);i++,setTimeout(n,2e3)}))}(),r},v.prototype.addInput=function(e,t){(0,n.A2)(e),(0,n.u)(t),(0,n.zr)(t),(0,n.gA)(t,"type");var r=this.api,i=g.Deferred(),o=g.extend({},r.baseAjaxOptions);o.url=this.baseUrlApi+"/api/jobs/"+e+"/input",o.data=t;return r.ajaxWrapper.postJson(o).done((function(e,t,r){var n=e=d(e);a.P.log("qgApiHelper addJobInput done",JSON.stringify(n)),i.resolve(n)})).fail((function(e,t,r){return 0===e.status?(a.P.log("qgApiHelper addJobInput fail connection problem",e.status),void i.reject(c.QG)):402===e.status?(a.P.log("qgApiHelper addJobInput fail payment required"),void i.reject(c.lV,h(e))):(a.P.log("qgApiHelper addJobInput fail connection problem",e.status),void i.reject(c.D$))})),i},v.prototype.addInputWithCheck=function(e,t,r){(0,n.A2)(e),(0,n.u)(t),(0,n.zr)(t),(0,n.gA)(t,"type"),(0,n.VW)(r),(0,n.GY)(r>=0);var i=g.Deferred(),o=0,l=this;function p(){if(o>5)return a.P.log("qgApiHelper addInputWithCheck fail - too many retries"),void i.reject(c.db);l.addInput(e,t).done((function(t){l.getJobInfoUntilInputCount(e,r+1).done((function(){i.resolve(t)})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper addInputWithCheck fail - payment required"),void i.reject(c.lV,t);a.P.log("qgApiHelper addInputWithCheck fail",e),i.reject(c.D$)}))})).fail((function(t,n){if(t!==c.QG){if(t===c.lV)return a.P.log("qgApiHelper addInputWithCheck fail - payment required"),void i.reject(c.lV,n);a.P.log("qgApiHelper addInputWithCheck fail"),i.reject(t)}else l.getJobInfoWithRetries(e,3).done((function(e){var t=e.input.length;return t===r?(a.P.log("qgApiHelper addInputWithCheck retry"),void setTimeout(p,2e3)):t===r+1?(a.P.log("qgApiHelper addInputWithCheck done - with retry"),void i.resolve(e.input[t-1])):(a.P.log("qgApiHelper addInputWithCheck fail","wrong number of inputs"),void i.reject(c.D$))})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper addInputWithCheck fail - payment required"),void i.reject(c.lV,t);a.P.log("qgApiHelper addInputWithCheck fail",e),i.reject(c.D$)}))})),o++}return p(),i},v.prototype.addInputs=function(e,t){(0,n.A2)(e),(0,n.u)(t);var r=this.api,i=g.Deferred(),l=g.extend({},r.baseAjaxOptions);l.url=this.baseUrlApi+"/api/jobs/"+e+"/input",l.data=t;return r.ajaxWrapper.postJson(l).done((function(e,r,n){var l=e=d(e);if(!new s((0,o.Hm)(l)?l[0]:l).isValid())return a.P.log("qgApiHelper addJobInput fail broken response",{info:"response: "+JSON.stringify(l)}),void i.reject(c.FK);a.P.log("qgApiHelper addJobInput done",JSON.stringify(t)),i.resolve(l)})).fail((function(e,t,r){if(402===e.status)return a.P.log("qgApiHelper addJobInput fail payment required"),void i.reject(c.lV,h(e));a.P.log("qgApiHelper addJobInput fail connection problem",e.status),i.reject(c.QG)})),i},v.prototype.addConversion=function(e,t){(0,n.A2)(e),(0,n.u)(t);var r=this.api,i=g.Deferred(),l=g.extend({},r.baseAjaxOptions);l.url=this.baseUrlApi+"/api/jobs/"+e+"/conversions",l.data=t;return r.ajaxWrapper.postJson(l).done((function(e,r,n){e=d(e),a.P.log("qgApiHelper addConversion done",JSON.stringify(t)),i.resolve(e)})).fail((function(e,t,r){var n=function(e){if(!(0,o.jV)(e))return null;if(!(0,o.jV)(e.responseJSON))return null;var t=e.responseJSON;return(0,o.fN)(t,"code")&&(0,o.fN)(t,"message")?{code:t.code,message:t.message}:null}(e);if(n){if(2===n.code)return a.P.log("qgApiHelper addConversion fail - invalid conversion option",{http_status:e.status,info:"conversion options: "+JSON.stringify(l)}),void i.reject(c.cM);if(2002===n.code)return a.P.log("qgApiHelper addConversion fail - job can not be modified",{http_status:e.status,info:"conversion options: "+JSON.stringify(l)}),void i.reject(c.$7)}return 0===e.status?(a.P.log("qgApiHelper addConversion fail - connection problem",e.status),void i.reject(c.QG)):402===e.status?(a.P.log("qgApiHelper addConversion fail - payment required"),void i.reject(c.lV,h(e))):(a.P.log("qgApiHelper addConversion fail - unknown",e.status),void i.reject(c.D$))})),i},v.prototype.addConversionWithCheck=function(e,t){(0,n.A2)(e);var r=g.Deferred(),i=this,l=0;function p(){if(l>5)return a.P.log("qgApiHelper addConversionWithCheck fail - too many retries"),void r.reject(c.db);i.addConversion(e,t).done((function(e){r.resolve(e)})).fail((function(t,n){if(t===c.lV)return a.P.log("qgApiHelper addConversionWithCheck fail - payment required"),void r.reject(c.lV,n);t===c.QG||t===c.D$?i.getJobInfoWithRetries(e,5).done((function(e){if((0,o.Hm)(e.conversion)){if(0===e.conversion.length)return a.P.log("qgApiHelper addConversionWithCheck retry - no conversion"),void setTimeout(p,2e3);if(1===e.conversion.length)return a.P.log("qgApiHelper addConversionWithCheck done - after fail"),void r.resolve(e.conversion[0]);a.P.log("qgApiHelper addConversionWithCheck fail - too many conversions"),r.reject(c.D$)}})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper addConversionWithCheck fail - payment required"),void r.reject(c.lV,t);a.P.log("qgApiHelper addConversionWithCheck fail - fail in getjobinfo"),r.reject(c.D$)})):r.reject(t)})),l++}return p(),r},v.prototype.startJob=function(e,t){(0,n.A2)(e);var r=g.Deferred();return r.reject(c.DC),r},v.prototype.deleteInput=function(e,t){(0,n.A2)(e),(0,n.A2)(t);var r=this.api,i=g.Deferred(),o=g.extend({},r.baseAjaxOptions);o.url=this.baseUrlApi+"/api/jobs/"+e+"/input/"+t+"/delete",o.data=g.extend({},r.baseData);return r.ajaxWrapper.postJson(o).done((function(e,r,n){e=d(e),a.P.log("qgApiHelper deleteInput done",t),i.resolve(e)})).fail((function(e,t,r){if(402===e.status)return a.P.log("qgApiHelper deleteInput fail payment required",e.status),void i.reject(c.lV,h(e));a.P.log("qgApiHelper deleteInput fail connection problem",e.status),i.reject(c.QG)})),i},v.prototype.deleteInputAndWait=function(e,t){var r=this;(0,n.A2)(e),(0,n.A2)(t);this.api;var i=g.Deferred();return this.deleteInput(e,t).done((function(){r.getJobInfoUntilInputIsDeleted(e,t).done((function(){i.resolve()})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper delete input and wait fail - payment required"),void i.reject(c.lV,t);a.P.log("qgApiHelper delete input and wait fail connection problem",e),i.reject(c.QG)}))})).fail((function(e,t){if(a.P.log("qgApiHelper delete input and wait fail connection problem",e),e===c.lV)return a.P.log("qgApiHelper addConversionWithCheck fail - payment required"),void i.reject(c.lV,t);i.reject(c.QG)})),i},v.prototype.setPassword=function(e,t,r){(0,n.A2)(e),(0,n.A2)(t);var i=g.Deferred(),o=this.api,l=this,p=0,u=g.extend({},o.baseData,{credentials:{decrypt_password:r}}),s=g.extend({},o.baseAjaxOptions);return s.url=this.baseUrlApi+"/api/jobs/"+e+"/input/"+t+"/patch",s.data=u,this.getJobInfoUntilInput(e,t).done((function(r){p=r.modified_at,o.ajaxWrapper.postJson(s).done((function(r,n,o){r=d(r),a.P.log("qgApiHelper set password done",t),l.getUpdatedInput(e,t,p).done((function(e){a.P.log("qgApiHelper set password finished",t),i.resolve(e)})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper set password fail  payment required"),void i.reject(c.lV,t);a.P.log("qgApiHelper set password fail connection problem",e),i.reject(c.QG)}))})).fail((function(e,t,r){if(402===e.status)return a.P.log("qgApiHelper set password fail payment required",e.status),void i.reject(c.lV,h(e));a.P.log("qgApiHelper set password fail connection problem",e.status),i.reject(c.QG)}))})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper set password fail  payment required"),void i.reject(c.lV,t);a.P.log("qgApiHelper set password fail connection problem",e),i.reject(c.QG)})),i},v.prototype.getJobInfoUntilInput=function(e,t){var r=g.Deferred(),n=this,i=0;return function o(){n.getJobInfo(e).done((function(e){var n=e.input.find((function(e,r,n){return e.id===t}));void 0===n?(i>60&&r.reject(c.db),++i,setTimeout(o,1e3)):r.resolve(n)})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper getJobInfoUntilInput fail  payment required"),void r.reject(c.lV,t);a.P.log("qgApiHelper getJobInfoUntilInput fail connection problem",e),r.reject(c.QG)}))}(),r},v.prototype.getJobInfoUntilInputIsDeleted=function(e,t){var r=g.Deferred(),n=this,i=0;return function o(){n.getJobInfo(e).done((function(e){void 0!==e.input.find((function(e,r,n){return e.id===t}))?(i>60&&r.reject(c.db),++i,setTimeout(o,1e3)):r.resolve()})).fail((function(e,t){a.P.log("qgApiHelper getJobInfoUntilInputIsDeleted connection problem",e),r.reject(c.QG)}))}(),r},v.prototype.getJobInfoUntilInputCount=function(e,t){var r=g.Deferred(),n=this,i=0,o=0;return function l(){n.getJobInfo(e).done((function(e){o=0,e.input.length>=t?r.resolve(e):i>60?r.reject(c.db):(++i,setTimeout(l,1e3))})).fail((function(e,t){return e===c.lV?(a.P.log("qgApiHelper getJobInfoUntilInputCount fail payment required"),void r.reject(c.lV,t)):o<30?(o++,void setTimeout(l,3e3)):(a.P.log("qgApiHelper getJobInfoUntilInputCount fail",e),void r.reject(c.QG))}))}(),r},v.prototype.getJobInfoUntilAtLeastOneInput=function(e){var t=g.Deferred(),r=this,n=0;return function i(){r.getJobInfo(e).done((function(e){e.input.length>=1?t.resolve(e):n>60?t.reject(c.db):(++n,setTimeout(i,1e3))})).fail((function(e,r){if(e===c.lV)return a.P.log("qgApiHelper getJobInfoUntilAtLeastOneInput fail payment required"),void t.reject(c.lV,r);a.P.log("qgApiHelper getJobInfoUntilAtLeastOneInput fail",e),t.reject(c.QG)}))}(),t},v.prototype.getUpdatedInput=function(e,t,r){var n=g.Deferred(),i=this,o=0;return function l(){i.getJobInfo(e).done((function(e){var i=e.input.find((function(e,r,n){return e.id===t}));i.modified_at>r?n.resolve(i):o>60?n.reject(c.db):(++o,setTimeout(l,1e3))})).fail((function(e,t){if(e===c.lV)return a.P.log("qgApiHelper get updated input fail payment required"),void n.reject(c.lV,t);a.P.log("qgApiHelper get updated input fail connection problem",e),n.reject(c.QG)}))}(),n};var b=r(27489);function m(e){(0,n.VW)(e),this.maxCacheTimeSeconds=e,this.data={}}m.prototype.setData=function(e,t){(0,n.LJ)(e),(0,n.kM)(t),(0,n.mR)(t),this.data[e]={time_ms:Date.now(),data:t}},m.prototype.getData=function(e){return(0,n.LJ)(e),this.data.hasOwnProperty(e)?!((Date.now()-this.data[e].time_ms)/1e3>this.maxCacheTimeSeconds)&&this.data[e].data:null},m.prototype.getDataEvenIfTooOld=function(e){return(0,n.LJ)(e),this.data.hasOwnProperty(e)?this.data[e].data:null};var A=r(17105),y=r(19755);function I(e){(0,o.vV)(e)&&(e={}),this.baseApiData=null,(0,o.jV)(e.baseApiData)&&(this.baseApiData=e.baseApiData),this.baseUrlApi=null,(0,o.Rt)(e.baseUrlApi)&&(this.baseUrlApi=e.baseUrlApi),this.paymentRequiredCallback=null,(0,o.Cj)(e.paymentRequiredCallback)&&(this.paymentRequiredCallback=e.paymentRequiredCallback)}function j(e,t){(0,n.LJ)(e),this.apiHelper=new v(this,t),(0,n.kM)(this.apiHelper,'type must be "sat" or "oc"'),this.ajaxWrapper=new b.F,this.jobCache=new m(2),this.numberOfCurrentJobInfoRequests={},this.baseData={},(0,o.jV)(t.baseApiData)&&(this.baseData=t.baseApiData),this.baseAjaxOptions={dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},cache:!1,maxRetries:3,retryTimeout:!0,retry400:!1,retry500:!0,retryOther:!0}}j.prototype.createJob=function(e){var t=this.apiHelper;try{return t.createJob(e)}catch(e){a.P.log("qgApiHelper exception",e)}var r=y.Deferred();return r.reject(c.hI),r},j.prototype.createJobWithUploadServerCheck=function(e,t){(0,o.uC)(t)||(t=1);var r=y.Deferred(),n=this,i=0;function l(){n.apiHelper.createJob(e).done((function(e){!function(e){n.checkUploadServer(e.server).done((function(){var t=!0;r.resolve(e,t)})).fail((function(n,o){if(n!==c.lV)if(i>=t){a.P.log("qgApiHelper createJob info","no upload server found");var p=!1;r.resolve(e,p)}else{var u=1e4,s=1e3*++i;s>u&&(s=u),setTimeout((function(){l()}),s)}else r.reject(c.lV,o)}))}(e)})).fail((function(e,t){(0,A.T)(e),r.reject(e,t)}))}return l(),r},j.prototype.checkUploadServer=function(e,t){(0,n.LJ)(e),(0,o.uC)(t)||(t=0);e.replace(/(\/dl.*)/,"/dl/alive"),Date.now();var r=y.Deferred();return r.resolve()},j.prototype.getJobInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.A2)(e);var i=this.apiHelper;try{return i.getJobInfo(e,t,r)}catch(e){a.P.log("qgApiHelper exception",e)}var o=y.Deferred();return o.reject(c.hI),o},j.prototype.getJobInfoUntilStatus=function(e,t,r,i){(0,n.A2)(e);var o=this.apiHelper;try{return o.getJobInfoUntilStatus(e,t,r,i)}catch(e){a.P.log("qgApiHelper exception",e)}var l=y.Deferred();return l.reject(c.hI),l},j.prototype.getJobInfoWithRetries=function(e,t){(0,n.A2)(e),(0,o.uC)(t)||(t=5),(0,n.VW)(t),(0,n.GY)(t>0);var r=this.apiHelper;try{return r.getJobInfoWithRetries(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.getCachedJobInfo=function(e){(0,n.A2)(e);var t=this.jobCache.getData(e);(0,n.kM)(t),this.numberOfCurrentJobInfoRequests.hasOwnProperty(e)||(this.numberOfCurrentJobInfoRequests[e]=0);var r=this.numberOfCurrentJobInfoRequests[e]>0;if(!1===t&&!r)return this.getJobInfo(e);var i=this.jobCache.getDataEvenIfTooOld(e),o=y.Deferred();return o.resolve(i),o},j.prototype.addInput=function(e,t){(0,n.A2)(e),(0,n.u)(t);var r=this.apiHelper;try{return r.addInput(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.addInputWithCheck=function(e,t,r){(0,n.A2)(e),(0,n.u)(t),(0,n.VW)(r),(0,n.GY)(r>=0);var i=this.apiHelper;try{return i.addInputWithCheck(e,t,r)}catch(e){a.P.log("qgApiHelper exception",e)}var o=y.Deferred();return o.reject(c.hI),o},j.prototype.addInputsWithCheck=function(e,t,r){(0,n.A2)(e),(0,n.bG)(t),(0,n.GY)(t.length>0),(0,n.VW)(r),(0,n.GY)(r>=0);this.apiHelper;var i=this,o=y.Deferred(),l=0,p=t.length,u=r;return function r(){i.addInputWithCheck(e,t[l],u).done((function(){l++,u++,l>=p?o.resolve():setTimeout(r,200)})).fail((function(e,t){a.P.log("qgApiHelper addInputsWithCheck fail",e),o.reject(e,t)}))}(),o},j.prototype.addInputs=function(e,t){(0,n.A2)(e);var r=this.apiHelper;try{return r.addInputs(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.addInputId=function(e,t){(0,n.A2)(e),(0,n.A2)(t);var r={type:"input_id",source:t};return this.addInput(e,r)},j.prototype.addExternalUrl=function(e,t,r){(0,n.A2)(e),(0,n.LJ)(t),(0,o.vV)(r)&&(r="auto");var i={type:"remote",source:t,engine:r};return this.addInput(e,i)},j.prototype.addConversion=function(e,t){(0,n.A2)(e);var r=this.apiHelper;try{return r.addConversion(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.addConversionWithCheck=function(e,t){(0,n.A2)(e);var r=this.apiHelper;try{return r.addConversionWithCheck(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.startJob=function(e,t){(0,n.A2)(e);var r=this.apiHelper;try{return r.startJob(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.deleteInput=function(e,t){(0,n.A2)(e),(0,n.A2)(t);var r=this.apiHelper;try{return r.deleteInput(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.deleteInputAndWait=function(e,t){(0,n.A2)(e),(0,n.A2)(t);var r=this.apiHelper;try{return r.deleteInputAndWait(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.setPassword=function(e,t,r){(0,n.A2)(e),(0,n.A2)(t),(0,n.pX)(r);var i=this.apiHelper;try{return i.setPassword(e,t,r)}catch(e){a.P.log("qgApiHelper exception",e)}var o=y.Deferred();return o.reject(c.hI),o},j.prototype.getJobInfoUntilInputCount=function(e,t){(0,n.A2)(e);var r=this.apiHelper;try{return r.getJobInfoUntilInputCount(e,t)}catch(e){a.P.log("qgApiHelper exception",e)}var i=y.Deferred();return i.reject(c.hI),i},j.prototype.getJobInfoUntilAtLeastOneInput=function(e){(0,n.A2)(e);var t=this.apiHelper;try{return t.getJobInfoUntilAtLeastOneInput(e)}catch(e){a.P.log("qgApiHelper exception",e)}var r=y.Deferred();return r.reject(c.hI),r},j.prototype.waitForRemoteInput=function(e,t){(0,n.A2)(e),(0,n.A2)(t);var r=this,o=y.Deferred(),p=Date.now();function s(){var e=(Date.now()-p)/1e3,t=5e3;e<10?t=1e3:e<30?t=2e3:e<60&&(t=3e3),setTimeout(f,t)}function d(r){var n=(Date.now()-p)/1e3,i=new l.S(r),d=i.getInput(t);if(null===d)return n>10&&a.P.log("qgApiHelper waitForRemoteInput info",{info:"input id missing from job",input_id:t,job_id:e,job_info:JSON.stringify(r),duration_s:n}),void s();if(i.isInputDownloading(t))s();else{if(i.isInputReady(t))return o.resolve(d),void a.P.log("qgApiHelper waitForRemoteInput done",{input_id:t,job_id:e,duration_s:n});var f={code:0,message:"should never happen"},g=i.getInputError(t),h=i.getInputWarning(t);null!==g?f=g:null!==h?f=h:d.status===u.V5?f={code:0,message:"server response is missing input warnings and input errrors"}:d.status===u.s8&&(f={code:0,message:"input was canceled"});var v=function(r,n,i){a.P.log("qgApiHelper waitForRemoteInput fail",{info:JSON.stringify(r),input_id:t,job_id:e,job_info:JSON.stringify(n),duration_s:i});var o=c.D$;return 50===r.code||34===r.code?o=c.sZ:10===r.code&&(o=c.u7),(0,A.T)(o),o}(f,r,n);(0,A.T)(v),o.reject(v)}}function f(){r.getCachedJobInfo(e).done((function(e){(0,i.dI)(e),d(e)})).fail((function(r,n){(0,A.T)(r),r!==c.lV?(a.P.log("qgApiHelper waitForRemoteInput retry",{info:"error: "+r,job_id:e,input_id:t}),s()):o.reject(r,n)}))}return f(),o},j.prototype.savePreset=function(e){var t=this.apiHelper;try{return t.savePreset(e)}catch(e){a.P.log("qgApiHelper exception",e)}var r=y.Deferred();return r.reject(c.hI),r},j.prototype.waitForCompletedJob=function(e){var t=y.Deferred(),r=Date.now(),n=0;var i=this;return function o(){n>5?t.reject(c.db):i.getJobInfoWithRetries(e,3).done((function(n){var i=Date.now()-r,l=n.status.code;if("completed"!==l){if("failed"===l)return a.P.log("qgApiHelper waitForCompletedJob - job is failed",{job_id:e}),void t.reject(c.rt);if(("incomplete"===l||"ready"===l)&&i>4e3)return a.P.log("qgApiHelper waitForCompletedJob - job has unextected status",{job_id:e,info:"status: "+l}),void t.reject(c.rt);var p=function(e){var t=500;return e>2e3&&(t=1e3),e>5e3&&(t=2e3),e>1e4&&(t=3e3),t}(i);setTimeout(o,p)}else t.resolve(n)})).fail((function(e,r){e!==c.lV?(n++,setTimeout(o,5e3)):t.reject(c.lV,r)}))}(),t},j.prototype.createJobAndConversion=function(e,t){var r=y.Deferred(),n=this;return this.createJob(e).done((function(e){n.addConversionWithCheck(e.id,t).done((function(t){r.resolve(e)})).fail((function(e,t){e!==c.lV?r.reject(c.D$,t):r.reject(c.lV,t)}))})).fail((function(e,t){e!==c.lV?r.reject(c.D$,t):r.reject(c.lV,t)})),r},j.prototype.createThumbnailFromInputId=function(e,t){var r=y.Deferred();(0,o.vV)(t)&&(t=200);var n={category:"operation",target:"thumbnail",options:{thumbnail_target:"jpg",width:t,allow_multiple_outputs:!0,pages:"1"}},i=this;return this.createJobAndConversion({operation:"thumbnail system"},n).done((function(t){i.addInputId(t.id,e).done((function(e){i.waitForCompletedJob(t.id).done((function(e){r.resolve(e.output[0].uri)})).fail((function(e,t){e!==c.lV?r.reject(c.D$):r.reject(c.lV,t)}))})).fail((function(e,t){e!==c.lV?r.reject(c.D$):r.reject(c.lV,t)}))})).fail((function(e,t){e!==c.lV?r.reject(c.D$):r.reject(c.lV,t)})),r};var P=function(e){return(0,n.u)(e),new j("sat",e)}},80667:function(e,t,r){r.d(t,{G:function(){return u}});r(32564);var n=r(37554),i=r(20144),o=r(1745),a=r(1053),l=r(38232),p=r(19755);function u(){"string"!=typeof window.paymentError&&(window.paymentError="none");var e=0;!function t(){if("undefined"==typeof qgAuthSubscribe)return e++,void setTimeout(t,100);qgAuthSubscribe.init(),p(".loading-modal").hide(),p(".authentication-box").removeClass("hidden"),qgLogger.log("subscribe modal loaded",{duration_ms:e});var r=window.gSatUserManager.getUserDataFromSessionStorage();null!==r&&(r.isEligibleForFreeTrial?(p(".free-trial-text").removeClass("hidden"),p(".sign-up-text").addClass("hidden")):(p(".free-trial-text").addClass("hidden"),p(".sign-up-text").removeClass("hidden")),p("#paymentAnnual").addClass("active premium-bg text-white")),o.Q.get("/api/pricing-information",{format_with_currency:!0}).then((function(e){n.Z.getUser().then((function(t){var r=JSON.parse(null==e?void 0:e.data);r=r.free_trial_data,p(".free-trial-end-date").text(r.dateFirstChargeFull),p(".free-trial-end-date").removeClass("fa fa-spinner fa-spin");var n="usd";t.isFromEurope&&(n="eur"),new i.ZP({el:"#trialInfoGraphic",name:"TrialInfoGraphic",components:{},render:function(e){return e(a.Z,{props:{countDaysFreeTrialDuration:window.sat.freeTrialPeriod,countDaysReminderBeforeTrialEnd:r.countDaysReminderBeforeTrialEnd,dateFirstChargeShort:r.dateFirstChargeShort,dateFirstChargeFull:r.dateFirstChargeFull,priceAtTrialStart:r.priceAtTrialStart[n],showGraphic:!1}})}})}))})),window.gSatUserManager.getUserDataDeprecated().done((function(e){(e.isRegistered||l.f.getEnableFreeTrial())&&p("#paymentFree").addClass("hidden"),"limit-too-many-inputs"===window.paymentError&&e.isRegistered&&(p(".limit-inputs-anonymous").removeClass("hidden"),p(".limit-reached").removeClass("hidden")),"limit-input-too-large"===window.paymentError&&e.isRegistered&&(p(".limit-size-anonymous").removeClass("hidden"),p(".limit-reached").removeClass("hidden")),"limit-job-too-large"===window.paymentError&&e.isRegistered&&(p(".limit-size-anonymous").removeClass("hidden"),p(".limit-reached").removeClass("hidden")),e.isEligibleForFreeTrial&&l.f.getEnableFreeTrial()?(p(".free-trial-text").removeClass("hidden"),p(".sign-up-text").addClass("hidden")):(p(".free-trial-text").addClass("hidden"),p(".sign-up-text").removeClass("hidden"),p(".choose-plan").removeClass("hidden")),p("#paymentAnnual").addClass("active premium-bg text-white")}))}()}},35345:function(e,t,r){r.d(t,{n:function(){return A}});r(89554),r(41539),r(54747),r(88674),r(32564);var n=r(38232),i=(r(72888),r(87506)),o=r(72997),a=r(90289);r(69826);var l=r(19755);var p=r(19755);function u(e){(0,o.Rb)(e)?window.paymentError=e:(window.paymentError=null,i.P.log("limited reached - called without event")),p("#authModal").modal("show");var t=n.f.getApiUrl("/api/tpl/register")+"?locale="+n.f.getLocale();return(0,o.Rb)(window.paymentError)&&(t+="&limitevent="+window.paymentError),new Promise((function(r){p.get({url:t,cache:!1,xhrFields:{withCredentials:!0}},(function(t){p("#authModal").find(".modal-body").html(t),p(".register-tpl-login").click((function(t){t.preventDefault(),function(e){l("#authModal").modal("show");var t=n.f.getApiUrl("/api/tpl/login")+"?locale="+n.f.getLocale();l.get({url:t,cache:!1,xhrFields:{withCredentials:!0}},(function(t){l("#authModal").find(".modal-body").html(t),l(".register-tpl-register").click((function(t){t.preventDefault(),u(e)}))}))}(e)})),r()}))}))}var s=r(80667),d=r(19755);var c=r(13962),f=(r(82017),r(56413)),g=r(97760),h=r(37554),v=r(19755),b=null;function m(e,t){if(e!==c.w5)if(e!==c.P_&&e!==c.GG){var r="";(0,o.Rt)(e)&&(r="#limithit=".concat(e)),window.location=sat.pricing+r}else{var n=t;if(void 0===t){n="";try{n=window.qgUploader.getSizeOfAllInputs()}catch(e){}}window.location=sat.pricing+"#filesize="+n}else window.location=sat.pricing+"#filecount="}function A(e,t){if((0,o.vV)(e)||(0,o.Nx)(e),(0,o.Hm)(e)&&e.forEach((function(e){!function(e){if(!(0,o.Rt)(e))throw new Error((0,a.R)("invalid limit"))}(e)})),(0,o.Rt)(e)&&(0,o.Rb)(e)&&!(0,f.T)(e)&&!(0,g.j)(e))throw new Error("received invalid limit: "+e);window.allowLeave=!0;var r=n.f.getConfig();return function(){if(null!==b){if(Date.now()/1e3-b<5)return!0}return b=Date.now()/1e3,!1}()?Promise.resolve():!1===r.modal?("Online-Convert"===n.f.getProjectName()?m(e,t):window.location=r.pricing+"#limit=1",new Promise((function(e){setTimeout(e,3e4)}))):v("#authModal").is(":visible")?Promise.resolve():h.Z.getUser().then((function(t){if(!t.isProfessional())return t.isRegistered()?function(e){(0,o.Rb)(e)?window.paymentError=e:(window.paymentError=null,i.P.log("limited reached - called without event")),d("#authModal").modal("show");var t=n.f.getApiUrl("/api/tpl/subscribe")+"?locale="+n.f.getLocale();return(0,o.Rb)(window.paymentError)&&(t+="&limitevent="+window.paymentError),new Promise((function(r){d.get({url:t,cache:!1,xhrFields:{withCredentials:!0}},(function(t){d("#authModal").find(".modal-body").html(t),(0,s.G)(),d(".register-tpl-register").click((function(t){t.preventDefault(),u(e)})),r()}))}))}(e):u(e)}))}},97760:function(e,t,r){r.d(t,{j:function(){return o}});var n=r(72997),i=r(13962);function o(e){return!!(0,n.Rt)(e)&&(0,n.ml)(i.bB,e)}},80385:function(e,t,r){r.d(t,{L:function(){return p}});r(69070);var n=r(34979),i=r(72997),o=r(89644);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,l;return t=e,(r=[{key:"openOnPage",value:function(e){return n.h.dispatch(n.aD.MODAL.OPEN,e)}},{key:"openLogin",value:function(){return this.openOnPage(o._.LOGIN)}},{key:"openRegister",value:function(){return this.openOnPage(o._.REGISTER)}},{key:"openUpgrade",value:function(){return this.openOnPage(o._.REGISTER_PLAN_SELECT)}},{key:"openForPricingFree",value:function(){return n.h.commit(n.QF.MODAL.SET_SKIP_PAYMENT,!0),this.openRegister()}},{key:"openForPricingPremium",value:function(e){var t,r,i;return n.h.commit(n.QF.MODAL.SET_SKIP_PLAN_SELECT,!0),n.h.commit(n.QF.MODAL.SET_SELECTED_BILLING,null!==(t=null==e?void 0:e.billing)&&void 0!==t?t:null),n.h.commit(n.QF.MODAL.SET_SELECTED_PLAN,null!==(r=null==e?void 0:e.plan)&&void 0!==r?r:"individual"),n.h.commit(n.QF.MODAL.SET_SELECTED_SIZE,null!==(i=null==e?void 0:e.size)&&void 0!==i?i:null),this.openOnPage(o._.REGISTER_CHOOSE_PAYMENT)}},{key:"isOpen",value:function(){return(0,i.Rt)(n.h.getters[n.Yn.MODAL.GET_OPEN_PAGE])}},{key:"isSubmitting",value:function(){return n.h.getters[n.Yn.MODAL.GET_SUBMITTING]}}])&&a(t.prototype,r),l&&a(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();r.g.gRegisterPaymentModalHelper||(r.g.gRegisterPaymentModalHelper=new l);var p=r.g.gRegisterPaymentModalHelper}}]);